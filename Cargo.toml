[workspace]
resolver = "2"
members = [
    "crates/otter-vm-bytecode",
    "crates/otter-vm-core",
    "crates/otter-vm-compiler",
    "crates/otter-vm-gc",
    "crates/otter-test262",
    "crates/otter-jsc-sys",
    "crates/otter-jsc-core",
    "crates/otter-macros",
    "crates/otter-runtime",
    "crates/otter-engine",
    "crates/otter-node",
    "crates/otter-sql",
    "crates/otter-kv",
    "crates/otter-pm",
    "crates/otterjs",
]

[workspace.dependencies]
thiserror = "2"

# Optimized release profile for minimal startup time
[profile.release]
lto = "thin"           # Link-time optimization (improves code layout)
codegen-units = 1      # Single codegen unit (better inlining, worse compile time)
strip = true           # Strip symbols (smaller binary)
panic = "abort"        # No unwinding (smaller binary)
opt-level = 3          # Maximum optimization

# Fast release for development iteration
[profile.release-fast]
inherits = "release"
lto = false
codegen-units = 16
strip = false
