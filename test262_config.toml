# Test262 Runner Configuration for Otter VM
# This file configures the test262 conformance test runner.

# Path to the test262 directory (relative to project root)
# test262_path = "tests/test262"

# Pin test262 to a specific commit (optional)
# test262_commit = "abc123..."

# Default timeout in seconds per test
timeout_secs = 10

# Directory for saving results
# results_dir = "test262_results"

# Features to skip (tests requiring these features will be skipped).
# These features are not yet implemented in Otter.
skip_features = [
    # Atomics & shared memory
    "Atomics",
    "SharedArrayBuffer",
    # Decorators proposal
    "decorators",
    # Import assertions / attributes
    "import-assertions",
    "import-attributes",
    # FinalizationRegistry / WeakRef
    "FinalizationRegistry",
    "WeakRef",
    # ShadowRealm
    "ShadowRealm",
    # Explicit resource management (using/await using)
    "explicit-resource-management",
    # Tail calls
    "tail-call-optimization",
    # Import / export (module system)
    "dynamic-import",
    "import.meta",
    # Resizable ArrayBuffer
    "resizable-arraybuffer",
    "arraybuffer-transfer",
    # JSON modules
    "json-modules",
    # Iterator helpers
    "iterator-helpers",
    # Hashbang
    "hashbang",
    # Class features
    "class-fields-public",
    "class-methods-private",
    "class-static-block",
    "class-static-fields-private",
    "class-static-fields-public",
    "class-static-methods-private",
    # Other proposals
    "Array.fromAsync",
]

# Test path patterns to ignore (tests matching these patterns will be skipped)
ignored_tests = [
    # SpiderMonkey staging tests use SM-specific harness functions (diff, etc.)
    "staging/sm/Math",
]

# Tests known to panic/crash the VM (will be skipped with a warning)
known_panics = [
    # Stack overflow in regress crate with 200 nested parens
    "S15.10.2.8_A3_T15",
    "S15.10.2.8_A3_T16",
    # Unicode property-escapes generated tests build huge strings, cause OOM/GC crash
    "RegExp/property-escapes/generated",
]
